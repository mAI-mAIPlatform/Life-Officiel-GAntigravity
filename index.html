<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life - Open World</title>
    <!-- Tailwind CSS (via CDN for single-file quick setup) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./menu.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        liquidBlue: '#0A192F',
                        neonGreen: '#00FF80',
                        neonCyan: '#00FFFF'
                    },
                    keyframes: {
                        shimmer: {
                            '100%': { transform: 'translateX(100%)' }
                        },
                        marquee: {
                            '0%': { transform: 'translateX(100%)' },
                            '100%': { transform: 'translateX(-100%)' }
                        },
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        glowPulse: {
                            '0%, 100%': { filter: 'drop-shadow(0 0 15px rgba(0,255,255,0.6))' },
                            '50%': { filter: 'drop-shadow(0 0 35px rgba(0,255,255,1))' }
                        }
                    },
                    animation: {
                        fadeInUp: 'fadeInUp 1s ease-out forwards',
                        glowPulse: 'glowPulse 3s ease-in-out infinite'
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-gray-900 text-white overflow-hidden m-0 w-screen h-screen">
    <!-- UI Layer -->
    <div id="ui-container"
        class="absolute inset-0 z-10 flex flex-col justify-between bg-white/5 backdrop-blur-xl transition-opacity duration-1000 overflow-hidden font-sans">

        <!-- Animated Background Grid Overlay -->
        <div class="absolute inset-0 z-[-1] pointer-events-none opacity-20"
            style="background-image: linear-gradient(to right, #00FFFF 1px, transparent 1px), linear-gradient(to bottom, #00FFFF 1px, transparent 1px); background-size: 50px 50px; mask-image: radial-gradient(circle at center, black, transparent 80%);">
        </div>

        <!-- Top Bar: Profile & Currency -->
        <div class="w-full flex justify-between items-start p-8 relative z-20">
            <!-- Left: Logo Mini -->
            <div class="flex items-center gap-4">
                <img src="./assets/logo.png" alt="Life Logo"
                    class="w-32 drop-shadow-[0_0_15px_rgba(0,255,255,0.8)] hover:scale-105 transition-transform"
                    onerror="this.src='https://placehold.co/200x80/0A192F/00FFFF.png?text=LIFE'">
                <span
                    class="px-3 py-1 bg-neonCyan/20 text-neonCyan text-xs font-bold rounded-full border border-neonCyan/50 uppercase tracking-widest animate-pulse">v0.0.4
                    Build Alpha ++</span>
            </div>

            <!-- Center: World Clock -->
            <div
                class="absolute left-1/2 -translate-x-1/2 flex items-center gap-3 bg-black/60 backdrop-blur-md px-6 py-2 rounded-full border border-white/20 shadow-[0_0_20px_rgba(0,0,0,0.5)]">
                <svg class="w-6 h-6 text-neonCyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <div class="flex flex-col items-center leading-none">
                    <span id="world-clock-display"
                        class="text-2xl font-black text-white font-mono tracking-widest drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]">08:00</span>
                    <span id="world-day-display"
                        class="text-[10px] text-neonCyan uppercase font-bold tracking-widest mt-1">Jour 1</span>
                </div>
            </div>

            <!-- Right: Player Card (Glassmorphism) -->
            <div class="flex gap-4 items-center">
                <div
                    class="bg-white/10 border border-white/20 backdrop-blur-md rounded-2xl p-2 flex items-center gap-4 shadow-lg pr-6 cursor-pointer hover:bg-white/20 transition-all">
                    <div
                        class="w-12 h-12 rounded-xl bg-gradient-to-br from-neonCyan to-blue-600 flex items-center justify-center shadow-[0_0_15px_rgba(0,255,255,0.5)] relative overflow-hidden">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                    <div>
                        <div class="flex items-center gap-2">
                            <p class="player-username-display text-white font-bold text-sm tracking-wide">PIONEER_77</p>
                            <span
                                class="player-credits-display text-xs font-bold text-yellow-400 bg-black/50 px-2 py-0.5 rounded border border-yellow-400/30">500
                                m's</span>
                        </div>
                        <p class="text-neonCyan text-xs font-mono">Lvl 1 ‚Ä¢ Citizen</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Top Navigation Tabs (Added for Life Update) -->
        <div
            class="absolute top-28 left-1/2 -translate-x-1/2 flex gap-4 z-30 bg-black/40 backdrop-blur-md p-2 rounded-3xl border border-white/10 w-max shadow-xl">
            <button id="nav-btn-accueil"
                class="px-6 py-2 rounded-2xl font-bold uppercase tracking-widest text-sm text-neonCyan bg-white/10 transition-all shadow-inner">Accueil</button>
            <button id="nav-btn-news"
                class="px-6 py-2 rounded-2xl font-bold uppercase tracking-widest text-sm text-gray-400 hover:text-white hover:bg-white/5 transition-all">Actualit√©s</button>
            <button id="nav-btn-store"
                class="px-6 py-2 rounded-2xl font-bold uppercase tracking-widest text-sm text-gray-400 hover:text-white hover:bg-white/5 transition-all">Store</button>
            <button id="nav-btn-credits"
                class="px-6 py-2 rounded-2xl font-bold uppercase tracking-widest text-sm text-gray-400 hover:text-white hover:bg-white/5 transition-all">Cr√©dits</button>
            <button id="nav-btn-pass"
                class="px-6 py-2 rounded-2xl font-bold uppercase tracking-widest text-sm text-gray-400 hover:text-white hover:bg-white/5 transition-all">Life
                Pass</button>
            <button id="nav-btn-casier"
                class="px-6 py-2 rounded-2xl font-bold uppercase tracking-widest text-sm text-gray-400 hover:text-white hover:bg-white/5 transition-all">Casier</button>
            <button id="nav-btn-parametres"
                class="px-6 py-2 rounded-2xl font-bold uppercase tracking-widest text-sm text-gray-400 hover:text-white hover:bg-white/5 transition-all">Param√®tres</button>
        </div>

        <!-- Main Tab Container -->
        <div class="flex-1 w-full relative z-20 mt-20">
            <!-- TAB: Accueil -->
            <div id="tab-accueil"
                class="absolute inset-0 flex flex-col items-center justify-center p-8 transition-opacity duration-300 overflow-y-auto">
                <h1
                    class="animate-fadeInUp animate-glowPulse text-7xl md:text-9xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-br from-white via-cyan-100 to-neonCyan mb-6 uppercase text-center mix-blend-screen mt-10 hover:scale-105 transition-transform duration-700 cursor-default">
                    Life
                </h1>
                <p class="animate-fadeInUp text-blue-200/90 text-2xl font-light tracking-widest mb-16 max-w-2xl text-center"
                    style="animation-delay: 0.3s; opacity: 0;">
                    Entrez dans NeoCity et d√©couvrez votre seconde vie !
                </p>

                <!-- Action Buttons Container -->
                <div class="flex flex-col md:flex-row gap-6 items-center animate-fadeInUp"
                    style="animation-delay: 0.6s; opacity: 0;">
                    <!-- Massive Start Button -->
                    <button id="start-btn"
                        class="group relative px-16 py-6 bg-white/10 hover:bg-white/20 text-white font-bold text-3xl rounded-3xl border border-white/30 backdrop-blur-lg shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_50px_rgba(0,255,255,0.4)] transition-all duration-300 transform hover:-translate-y-2 active:scale-95 overflow-hidden opacity-50 pointer-events-none">
                        <span class="relative z-10 flex items-center gap-3 uppercase tracking-widest break-words">
                            <svg class="w-8 h-8 text-neonCyan group-hover:animate-spin" fill="none"
                                stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z">
                                </path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            Chargement des Assets...
                        </span>
                        <div
                            class="absolute inset-0 bg-gradient-to-r from-neonCyan/0 via-neonCyan/30 to-neonCyan/0 -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]">
                        </div>
                    </button>
                </div>
            </div>

            <!-- TAB: Actualit√©s -->
            <div id="tab-news"
                class="absolute inset-0 flex flex-col items-center justify-start p-8 opacity-0 pointer-events-none transition-opacity duration-300 overflow-y-auto">
                <h2
                    class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600 mb-8 uppercase tracking-tight mt-10">
                    Actualit√©s & Mises √† jour</h2>
                <div class="w-full max-w-4xl flex flex-col gap-6">
                    <div class="bg-gray-900/80 border border-blue-500/50 rounded-2xl p-6 shadow-lg">
                        <span class="bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded uppercase">Daily Life
                            Update</span>
                        <h3 class="text-white font-bold text-2xl mt-4">Nouveau Syst√®me de Cycle Jour/Nuit</h3>
                        <p class="text-gray-300 mt-2">D√©couvrez une ville qui √©volue selon l'heure. Plus de lumi√®re
                            statique, le soleil se couche maintenant sur NeoCity ! Visitez les magasins qui sont
                            d√©sormais fonctionnels, et sauvegardez vos objets dans votre Casier.</p>
                    </div>

                    <div class="bg-gray-900/80 border border-neonGreen/50 rounded-2xl p-6 shadow-lg">
                        <span class="bg-neonGreen text-black text-xs font-bold px-2 py-1 rounded uppercase">Life Pass
                            Saison 1</span>
                        <h3 class="text-white font-bold text-2xl mt-4">Gagnez de l'XP et montez en niveau !</h3>
                        <p class="text-gray-300 mt-2">Le passe de vie est maintenant actif. Compl√©tez vos qu√™tes pour
                            amasser de l'XP et d√©bloquer de nouveaux cr√©dits (m's) et objets exclusifs.</p>
                    </div>
                </div>
            </div>

            <!-- TAB: Store -->
            <div id="tab-store"
                class="absolute inset-0 flex flex-col items-center justify-start p-8 opacity-0 pointer-events-none transition-opacity duration-300 overflow-y-auto">
                <h2
                    class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-neonCyan to-cyan-500 mb-8 uppercase tracking-tight mt-10">
                    Life Store</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-6xl">
                    <!-- Skin 1 -->
                    <div id="store-item-red_neon"
                        class="bg-gray-900/80 border border-gray-700 rounded-2xl p-6 hover:border-red-500 transition-all cursor-pointer group">
                        <div
                            class="h-40 bg-black/50 rounded-xl mb-4 flex items-center justify-center text-red-500 font-bold text-2xl group-hover:scale-110 transition-transform">
                            üî¥ RED NEON
                        </div>
                        <h3 class="text-white font-bold text-xl">Combinaison Crimson</h3>
                        <p class="text-yellow-400 font-bold mt-2">1,500 m's</p>
                        <button
                            class="w-full mt-4 bg-red-600 hover:bg-red-500 text-white py-2 rounded font-bold uppercase tracking-widest transition-colors"
                            onclick="window.game.menuManager.buySkin('red_neon', 1500)">Acheter</button>
                    </div>
                    <!-- Skin 2 -->
                    <div id="store-item-green_cyber"
                        class="bg-gray-900/80 border border-gray-700 rounded-2xl p-6 hover:border-neonGreen transition-all cursor-pointer group">
                        <div
                            class="h-40 bg-black/50 rounded-xl mb-4 flex items-center justify-center text-neonGreen font-bold text-2xl group-hover:scale-110 transition-transform">
                            üü¢ GREEN CYBER
                        </div>
                        <h3 class="text-white font-bold text-xl">Exosquelette Viper</h3>
                        <p class="text-yellow-400 font-bold mt-2">2,500 m's</p>
                        <button
                            class="w-full mt-4 bg-green-600 hover:bg-green-500 text-white py-2 rounded font-bold uppercase tracking-widest transition-colors"
                            onclick="window.game.menuManager.buySkin('green_cyber', 2500)">Acheter</button>
                    </div>
                    <!-- Skin 3 -->
                    <div id="store-item-gold_vip"
                        class="bg-gray-900/80 border border-yellow-700 rounded-2xl p-6 hover:border-yellow-400 transition-all cursor-pointer group">
                        <div
                            class="h-40 bg-black/50 rounded-xl mb-4 flex items-center justify-center text-yellow-500 font-bold text-2xl group-hover:scale-110 transition-transform">
                            üü° GOLD VIP
                        </div>
                        <h3 class="text-white font-bold text-xl">Armure Lumina</h3>
                        <p class="text-yellow-400 font-bold mt-2">5,000 m's</p>
                        <button
                            class="w-full mt-4 bg-yellow-600 hover:bg-yellow-500 text-white py-2 rounded font-bold uppercase tracking-widest transition-colors"
                            onclick="window.game.menuManager.buySkin('gold_vip', 5000)">Acheter</button>
                    </div>
                </div>
            </div>

            <!-- TAB: Cr√©dits -->
            <div id="tab-credits"
                class="absolute inset-0 flex flex-col items-center justify-start p-8 opacity-0 pointer-events-none transition-opacity duration-300 overflow-y-auto">
                <h2 class="text-4xl font-black text-white mb-4 uppercase tracking-tight mt-10">√âchanger un Code m's</h2>

                <div
                    class="flex items-center gap-3 mb-10 bg-black/40 border border-yellow-400/50 px-6 py-3 rounded-xl shadow-[0_0_15px_rgba(255,215,0,0.2)]">
                    <span class="text-white text-lg font-bold">Solde Actuel :</span>
                    <span class="player-credits-display text-2xl font-black text-yellow-400 flex items-center gap-2">
                        <img src="./ms/icone.png" alt="m's" class="w-6 h-6 object-contain"
                            onerror="this.outerHTML='üíé'"> 500 m's
                    </span>
                </div>

                <div
                    class="bg-gray-900/80 border border-gray-700 rounded-2xl p-8 w-full max-w-xl flex flex-col items-center gap-6 shadow-xl">
                    <p class="text-gray-400 text-center">Entrez votre code promotionnel ou carte pr√©pay√©e pour obtenir
                        des cr√©dits (m's).</p>

                    <div class="w-full relative">
                        <input type="text" id="ms-code-input" placeholder="CODE-EXEMPLE"
                            class="w-full bg-black border-2 border-gray-600 focus:border-yellow-400 outline-none text-white text-xl font-mono text-center py-4 rounded-xl uppercase tracking-widest transition-colors">
                    </div>

                    <button id="redeem-code-btn"
                        class="w-full bg-yellow-500 hover:bg-yellow-400 text-black py-4 rounded-xl font-bold uppercase tracking-widest text-lg transition-colors shadow-[0_0_20px_rgba(255,215,0,0.4)]">
                        Valider le code
                    </button>
                    <p id="redeem-message" class="text-sm font-bold min-h-[20px] transition-opacity opacity-0"></p>
                </div>
            </div>

            <!-- TAB: Life Pass -->
            <div id="tab-pass"
                class="absolute inset-0 flex flex-col items-center justify-start p-8 opacity-0 pointer-events-none transition-opacity duration-300 overflow-y-auto">
                <div class="flex flex-col items-center max-w-5xl w-full mt-10 mb-8">
                    <h2 class="text-4xl font-black text-neonGreen uppercase tracking-tight mb-4">Life Pass: Saison 1
                    </h2>

                    <!-- XP Bar System -->
                    <div class="w-full flex flex-col gap-2">
                        <div class="flex justify-between items-end">
                            <span class="text-white font-bold text-xl">Niveau <span id="pass-current-level"
                                    class="text-neonGreen">1</span></span>
                            <span class="text-gray-400 text-sm font-mono"><span id="pass-current-xp">0</span> / 1000
                                XP</span>
                        </div>
                        <div class="w-full h-4 bg-gray-800 rounded-full overflow-hidden border border-gray-700">
                            <div id="pass-xp-bar"
                                class="h-full bg-neonGreen shadow-[0_0_10px_#00FF80] transition-all duration-500 ease-out">
                            </div>
                        </div>

                        <div id="pass-levels-container"
                            class="w-full max-w-5xl h-48 bg-black/40 backdrop-blur-md border border-white/10 rounded-2xl flex items-center overflow-x-auto p-6 gap-6 hide-scrollbar relative shadow-inner">
                            <!-- Populated dynamically by MenuManager for 50 levels -->
                            <div class="text-white/30 font-bold uppercase tracking-widest text-center w-full">
                                Chargement des r√©compenses...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB: Casier -->
            <div id="tab-casier"
                class="absolute inset-0 flex flex-col items-center justify-start p-8 opacity-0 pointer-events-none transition-opacity duration-300 overflow-y-auto">
                <h2 class="text-4xl font-black text-white mb-8 uppercase tracking-tight mt-10">Casier de
                    Personnalisation</h2>
                <p class="text-gray-400 mb-8">√âquipez les objets que vous avez achet√©s dans le Store.
                </p>

                <div id="casier-inventory-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6 w-full max-w-4xl">
                    <!-- Populated dynamically by MenuManager -->
                    <div
                        class="bg-gray-800 border-2 border-neonCyan rounded-xl p-4 flex flex-col items-center cursor-pointer">
                        <div class="w-16 h-16 rounded-full bg-blue-500 mb-2 shadow-[0_0_15px_rgba(0,100,255,0.8)]">
                        </div>
                        <span class="text-white font-bold text-sm text-center">Default Neon</span>
                        <span class="text-xs text-neonCyan mt-1">√âQUIP√â</span>
                    </div>
                </div>
            </div>

            <!-- TAB: Param√®tres -->
            <div id="tab-parametres"
                class="absolute inset-0 flex flex-col items-center justify-start p-8 opacity-0 pointer-events-none transition-opacity duration-300 overflow-y-auto">
                <h2 class="text-4xl font-black text-white mb-8 uppercase tracking-tight mt-10">
                    Param√®tres</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl w-full">

                    <div class="bg-[#050510] border border-white/10 rounded-3xl p-8 shadow-lg h-fit">
                        <h3
                            class="text-neonCyan font-bold uppercase tracking-widest mb-6 border-b border-white/10 pb-2">
                            Syst√®me & Audio</h3>
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-white font-bold">Volume</span>
                            <input id="settings-volume" type="range" class="w-1/2 accent-neonCyan" min="0" max="100"
                                value="75">
                        </div>
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-white font-bold">Qualit√© Graphique</span>
                            <select id="settings-graphics"
                                class="bg-gray-800 text-white p-2 rounded outline-none border border-gray-600 focus:border-neonCyan">
                                <option>Faible</option>
                                <option>Moyenne</option>
                                <option selected>Ultra</option>
                            </select>
                        </div>
                    </div>

                    <div class="bg-[#050510] border border-white/10 rounded-3xl p-8 shadow-lg h-fit">
                        <h3
                            class="text-neonCyan font-bold uppercase tracking-widest mb-6 border-b border-white/10 pb-2">
                            Commandes</h3>
                        <div class="flex flex-col gap-4">
                            <div class="flex justify-between items-center">
                                <span class="text-white font-bold">Avancer</span>
                                <span
                                    class="bg-gray-800 text-white px-4 py-1 rounded shadow-inner border border-gray-600 font-mono">W</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-white font-bold">Reculer</span>
                                <span
                                    class="bg-gray-800 text-white px-4 py-1 rounded shadow-inner border border-gray-600 font-mono">S</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-white font-bold">Gauche</span>
                                <span
                                    class="bg-gray-800 text-white px-4 py-1 rounded shadow-inner border border-gray-600 font-mono">A</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-white font-bold">Droite</span>
                                <span
                                    class="bg-gray-800 text-white px-4 py-1 rounded shadow-inner border border-gray-600 font-mono">D</span>
                            </div>
                            <div class="flex justify-between items-center mt-2 pt-2 border-t border-white/5">
                                <span class="text-white font-bold">Sauter</span>
                                <span
                                    class="bg-gray-800 text-white px-4 py-1 rounded shadow-inner border border-gray-600 font-mono">ESPACE</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-white font-bold">Interaction</span>
                                <span
                                    class="bg-gray-800 text-white px-4 py-1 rounded shadow-inner border border-gray-600 font-mono">E</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-[#050510] border border-white/10 rounded-3xl p-8 shadow-lg h-fit">
                        <h3
                            class="text-neonCyan font-bold uppercase tracking-widest mb-6 border-b border-white/10 pb-2">
                            Gestion du Compte</h3>
                        <div class="flex flex-col gap-6">
                            <div class="flex flex-col gap-2">
                                <label class="text-white text-sm font-bold opacity-70">Pseudo</label>
                                <div class="flex gap-2">
                                    <input type="text" id="settings-username-input"
                                        class="bg-gray-800 border border-gray-600 rounded-xl px-4 py-2 text-white flex-grow focus:border-neonCyan outline-none transition-all"
                                        placeholder="Nouveau pseudo...">
                                    <button id="settings-save-username-btn"
                                        class="bg-neonCyan/20 hover:bg-neonCyan/40 text-neonCyan border border-neonCyan/50 px-4 py-2 rounded-xl font-bold transition-all">OK</button>
                                </div>
                            </div>
                            <div class="flex flex-col gap-2">
                                <label class="text-white text-sm font-bold opacity-70">Protection (Mot
                                    de passe)</label>
                                <div class="flex gap-2">
                                    <input type="password" id="settings-password-input"
                                        class="bg-gray-800 border border-gray-600 rounded-xl px-4 py-2 text-white flex-grow focus:border-neonCyan outline-none transition-all"
                                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                                    <button id="settings-save-password-btn"
                                        class="bg-neonCyan/20 hover:bg-neonCyan/40 text-neonCyan border border-neonCyan/50 px-4 py-2 rounded-xl font-bold transition-all">Cadenas</button>
                                </div>
                                <p class="text-[10px] text-gray-400 font-light italic mt-1">> Le mot de
                                    passe sera
                                    demand√© au prochain lancement si actif.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Bar: News Ticker -->
            <div
                class="absolute bottom-0 left-0 w-full bg-black/50 border-t border-white/10 backdrop-blur-xl p-4 flex items-center justify-between z-[50]">
                <div class="flex items-center gap-4 w-full">
                    <span
                        class="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded uppercase tracking-widest shrink-0">LATEST
                        NEWS</span>
                    <div class="overflow-hidden relative w-full h-6">
                        <p
                            class="text-gray-300 font-mono text-sm whitespace-nowrap absolute animate-[marquee_20s_linear_infinite]">
                            > Patch 1.0.4 Deployed. Physics engine updated. NeoCity District 4 is now open
                            for exploration.
                            New vehicles arriving next week.
                        </p>
                    </div>
                </div>
            </div>
        </div>



        <!-- 3D Game Layer -->
        <div id="game-container" class="absolute inset-0 z-0"></div>

        <!-- Game UI Layer (Hidden in Menus, Visible In-Game) -->
        <div id="game-ui"
            class="absolute inset-0 z-20 pointer-events-none hidden flex flex-col justify-between items-center pb-12 font-sans transition-opacity duration-300">

            <!-- Top In-Game Header (Exit Button) -->
            <div class="w-full p-6 flex justify-between items-start pointer-events-auto">

                <!-- In-Game HUD: Heure & Faim -->
                <div class="flex flex-col gap-4">
                    <!-- Clock -->
                    <div
                        class="flex items-center gap-3 bg-black/60 backdrop-blur-md px-6 py-2 rounded-full border border-white/20 shadow-[0_0_20px_rgba(0,0,0,0.5)]">
                        <svg class="w-6 h-6 text-neonCyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="flex flex-col items-center leading-none">
                            <span id="hud-clock-display"
                                class="text-2xl font-black text-white font-mono tracking-widest drop-shadow-[0_0_8px_rgba(255,255,255,0.8)]">08:00</span>
                            <span id="hud-day-display"
                                class="text-[10px] text-neonCyan uppercase font-bold tracking-widest mt-1">Jour
                                1</span>
                        </div>
                    </div>

                    <!-- Hunger Jauge -->
                    <div
                        class="bg-black/60 backdrop-blur-md px-4 py-2 rounded-full border border-orange-500/50 shadow-[0_0_15px_rgba(249,115,22,0.3)] flex items-center gap-3 w-48">
                        <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-1.5 6h13l-1.5-6M9 13v6m6-6v6">
                            </path>
                        </svg>
                        <div class="flex-grow h-2 bg-gray-800 rounded-full overflow-hidden">
                            <div id="hunger-bar" class="h-full bg-green-500 rounded-full transition-all duration-500"
                                style="width: 100%"></div>
                        </div>
                        <span id="hunger-text" class="text-white font-mono text-xs font-bold">100%</span>
                    </div>
                </div>

                <!-- Exit Button -->
                <button id="exit-game-btn"
                    class="bg-red-600/80 hover:bg-red-500 text-white backdrop-blur px-6 py-2 rounded-xl font-bold uppercase tracking-widest text-sm shadow-[0_0_15px_rgba(255,0,0,0.5)] transition-all flex items-center gap-2 h-max">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                        </path>
                    </svg>
                    Quitter
                </button>
            </div>

            <div class="flex flex-col items-center w-full">
                <!-- Interact Prompt -->
                <div id="interact-ui"
                    class="bg-black/80 backdrop-blur-lg px-6 py-3 rounded-full border-2 border-neonCyan/50 shadow-[0_0_20px_rgba(0,255,255,0.4)] flex items-center gap-4 transition-all duration-300 transform scale-0 opacity-0 mb-6">
                    <span class="bg-white text-black font-extrabold px-3 py-1 rounded shadow">F</span>
                    <span class="text-white font-bold tracking-widest uppercase text-lg">V√©hicule</span>
                </div>

                <!-- Vehicle Interact Prompt -->
                <div id="vehicle-prompt-ui"
                    class="bg-black/80 backdrop-blur-lg px-6 py-3 rounded-full border-2 border-neonGreen/50 shadow-[0_0_20px_rgba(0,255,128,0.4)] flex items-center gap-4 transition-all duration-300 transform scale-0 opacity-0 mb-6 absolute bottom-32">
                    <span class="bg-white text-black font-extrabold px-3 py-1 rounded shadow">F</span>
                    <span class="text-[10px] text-neonCyan font-mono tracking-widest opacity-80 uppercase">Life:
                        v0.0.3 Build Alpha ++</span>
                </div>

                <!-- Sit Interact Prompt -->
                <div id="sit-ui"
                    class="bg-black/80 backdrop-blur-lg px-6 py-3 rounded-full border-2 border-neonCyan/50 shadow-[0_0_20px_rgba(0,255,255,0.4)] flex items-center gap-4 transition-all duration-300 transform scale-0 opacity-0 mb-6 absolute bottom-32">
                    <span class="bg-white text-black font-extrabold px-3 py-1 rounded shadow">X</span>
                    <span class="text-white font-bold tracking-widest uppercase text-lg">S'asseoir</span>
                </div>

                <!-- Door Interact Prompt -->
                <div id="door-prompt-ui"
                    class="bg-black/80 backdrop-blur-lg px-6 py-3 rounded-full border-2 border-white/50 shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-4 transition-all duration-300 transform scale-0 opacity-0 mb-6 absolute bottom-48">
                    <span class="bg-white text-black font-extrabold px-3 py-1 rounded shadow">E</span>
                    <span class="text-white font-bold tracking-widest uppercase text-lg">Entrer</span>
                </div>

                <!-- Dialog UI -->
                <div id="dialog-box"
                    class="w-full max-w-3xl bg-gray-900/90 backdrop-blur-xl border-t-2 border-white/20 rounded-t-3xl p-8 transition-all duration-500 transform translate-y-4 opacity-0 pointer-events-none hidden shadow-[0_-10px_40px_rgba(0,0,0,0.5)] relative">
                    <div class="absolute top-0 left-10 w-32 h-1 bg-neonCyan shadow-[0_0_15px_rgba(0,255,255,1)]">
                    </div>
                    <h3 id="dialog-name" class="text-neonCyan font-black text-2xl uppercase tracking-widest mb-3">
                        Name</h3>
                    <p id="dialog-text" class="text-white text-xl font-light leading-relaxed">Text goes
                        here...</p>
                </div>

                <!-- Mini-Map -->
                <div id="minimap-container"
                    class="absolute bottom-6 left-6 w-48 h-48 rounded-full border-4 border-neonCyan/50 shadow-[0_0_20px_rgba(0,255,255,0.3)] overflow-hidden bg-black/80 backdrop-blur-md hidden pointer-events-none">
                    <!-- Canvas is added dynamically -->
                    <div
                        class="absolute inset-0 z-10 bg-[radial-gradient(circle,transparent_50%,rgba(0,10,20,0.8)_100%)]">
                    </div>
                    <!-- Player Marker Point -->
                    <div class="absolute inset-0 flex items-center justify-center z-20">
                        <div class="w-3 h-3 bg-neonGreen rounded-full shadow-[0_0_10px_rgba(0,255,128,1)]">
                        </div>
                    </div>
                    <!-- North Indicator -->
                    <div
                        class="absolute top-2 left-1/2 transform -translate-x-1/2 z-20 text-neonCyan text-xs font-bold font-mono">
                        N</div>
                </div>

                <!-- Quest Tracker UI -->
                <div id="quest-tracker-ui"
                    class="absolute top-8 right-8 w-80 bg-black/60 backdrop-blur-md border hover:bg-black/80 transition-all duration-300 border-neonCyan/30 rounded-2xl p-5 shadow-[0_0_20px_rgba(0,255,255,0.1)] transform translate-x-full hidden pointer-events-none">
                    <div class="flex items-center gap-3 mb-3 pb-3 border-b border-white/10">
                        <div class="w-8 h-8 rounded-full bg-neonCyan/20 flex items-center justify-center">
                            <svg class="w-4 h-4 text-neonCyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h4 class="text-white font-bold tracking-widest uppercase text-sm">Objectif Actif
                        </h4>
                    </div>
                    <h5 id="quest-tracker-title" class="text-neonCyan font-bold text-lg mb-1">Title</h5>
                    <p id="quest-tracker-desc" class="text-gray-300 text-sm font-light leading-snug mb-3">
                        Desc</p>
                    <div class="flex items-center gap-2">
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                            </path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <span id="quest-tracker-dist" class="text-white font-mono font-bold text-sm">--m</span>
                    </div>
                </div>
            </div>

            <!-- mOS Container (Holographic Phone OS, toggled via M or Tab) -->
            <div id="mos-container"
                class="absolute inset-0 z-30 pointer-events-none flex items-center justify-center p-4 transition-all duration-700 transform translate-y-[120%] opacity-0 scale-90">
                <!-- The "Phone" Glass Frame -->
                <div
                    class="w-full max-w-sm h-full max-h-[800px] bg-white/10 backdrop-blur-2xl border border-white/30 rounded-[40px] shadow-[0_0_60px_rgba(0,255,255,0.2)] p-6 flex flex-col relative overflow-hidden pointer-events-auto">
                    <!-- Glitch / Grid effect -->
                    <div
                        class="absolute inset-0 z-[-1] pointer-events-none opacity-10 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-neonCyan via-transparent to-transparent">
                    </div>

                    <!-- Phone Header -->
                    <div class="flex justify-between items-center text-white mb-8 px-2">
                        <span class="font-bold tracking-wider">mOS v1.0</span>
                        <span class="text-neonCyan font-mono">10:52 AM</span>
                    </div>

                    <!-- Apps Grid -->
                    <div class="grid grid-cols-3 gap-6">
                        <!-- App Icon -->
                        <div class="flex flex-col items-center gap-2 group cursor-pointer"
                            onclick="window.game.mPhoneManager.openApp('news')">
                            <div
                                class="w-16 h-16 bg-gradient-to-tr from-cyan-600 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9.5a2.5 2.5 0 00-2.5-2.5H15">
                                    </path>
                                </svg>
                            </div>
                            <span
                                class="text-white text-xs font-bold tracking-widest uppercase text-center w-full">NeoNews</span>
                        </div>

                        <!-- App V√©hicules (Moto Asset 50) -->
                        <div class="flex flex-col items-center gap-2 group cursor-pointer"
                            onclick="window.game.mPhoneManager.openApp('vehicles')">
                            <div
                                class="w-16 h-16 bg-gradient-to-tr from-green-600 to-teal-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                                </svg>
                            </div>
                            <span
                                class="text-white text-xs font-bold tracking-widest uppercase text-center w-full">Garages</span>
                        </div>
                        <!-- App Icon -->
                        <div class="flex flex-col items-center gap-2 group cursor-pointer">
                            <div
                                class="w-16 h-16 bg-gradient-to-tr from-blue-600 to-cyan-400 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z">
                                    </path>
                                </svg>
                            </div>
                            <span class="text-white text-xs font-medium tracking-wide">Wallet</span>
                        </div>
                        <!-- App Icon -->
                        <div class="flex flex-col items-center gap-2 group cursor-pointer">
                            <div
                                class="w-16 h-16 bg-gradient-to-tr from-green-500 to-emerald-400 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 4v16m8-8H4">
                                    </path>
                                </svg>
                            </div>
                            <span class="text-white text-xs font-medium tracking-wide">Stats</span>
                        </div>
                        <!-- App Icon -->
                        <div id="map-app-btn"
                            class="flex flex-col items-center gap-2 group cursor-pointer pointer-events-auto">
                            <div
                                class="w-16 h-16 bg-gradient-to-tr from-purple-600 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9">
                                    </path>
                                </svg>
                            </div>
                            <span class="text-white text-xs font-medium tracking-wide">Map</span>
                        </div>
                    </div>

                    <!-- Home indicator (iOS style) -->
                    <div
                        class="absolute bottom-4 left-1/2 transform -translate-x-1/2 w-1/3 h-1.5 bg-white/50 rounded-full">
                    </div>
                </div>
            </div>

            <!-- Big Map UI Overlay -->
            <div id="map-overlay"
                class="absolute inset-0 z-40 bg-black/90 backdrop-blur-2xl hidden flex flex-col pointer-events-auto transition-opacity duration-300 opacity-0 p-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-black text-neonCyan uppercase tracking-widest"><span
                            class="text-white">Neo</span>City Map</h2>
                    <button id="close-map-btn"
                        class="w-12 h-12 rounded-full border border-white/30 flex items-center justify-center hover:bg-white/10 transition-colors cursor-pointer">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12">
                            </path>
                        </svg>
                    </button>
                </div>

                <!-- Fake Map Content (Grid aesthetic) -->
                <div
                    class="flex-grow w-full border-2 border-neonCyan/30 rounded-3xl relative overflow-hidden bg-[#0A192F] shadow-[0_0_50px_rgba(0,255,255,0.1)]">
                    <!-- Grid Background -->
                    <div class="absolute inset-0 opacity-20"
                        style="background-image: linear-gradient(to right, #00FFFF 1px, transparent 1px), linear-gradient(to bottom, #00FFFF 1px, transparent 1px); background-size: 40px 40px;">
                    </div>

                    <!-- Map Markers -->
                    <!-- Player Pos -->
                    <div
                        class="absolute top-1/2 left-1/2 w-4 h-4 bg-neonGreen rounded-full transform -translate-x-1/2 -translate-y-1/2 shadow-[0_0_15px_#00FF80] border-2 border-white z-10">
                        <div class="absolute inset-0 rounded-full bg-neonGreen animate-ping"></div>
                        <span
                            class="absolute top-6 left-1/2 -translate-x-1/2 text-neonGreen font-bold text-xs shadow-black drop-shadow-md">YOU</span>
                    </div>

                    <!-- Quest Pos -->
                    <div
                        class="absolute top-[40%] left-[60%] w-6 h-6 border-2 border-yellow-400 rotate-45 flex items-center justify-center shadow-[0_0_15px_rgba(250,204,21,0.6)]">
                        <div class="w-2 h-2 bg-yellow-400"></div>
                        <span
                            class="absolute -top-6 left-1/2 -translate-x-1/2 text-yellow-400 font-bold text-xs -rotate-45 whitespace-nowrap shadow-black drop-shadow-md">OBJECTIF</span>
                    </div>

                    <!-- Apartment Pos -->
                    <div class="absolute top-[55%] left-[45%] flex items-center justify-center">
                        <svg class="w-6 h-6 text-neonCyan drop-shadow-[0_0_10px_#00FFFF]" fill="none"
                            stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                            </path>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Entry Point -->
            <script type="module" src="./src/engine/main.js"></script>
</body>

</html>